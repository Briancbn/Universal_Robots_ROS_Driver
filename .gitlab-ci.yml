image: docker:git
services:
  - docker:dind
before_script:
  - apk add --update bash coreutils tar
  - git clone --quiet --depth 1 https://github.com/ros-industrial/industrial_ci .industrial_ci

clang-format:
  variables:
    CLANG_FORMAT_CHECK: "file"
    CLANG_FORMAT_VERSION: "6.0"
    ROS_DISTRO: "foxy"
  script: .industrial_ci/gitlab.sh

build_foxy:
  variables:
    ROS_DISTRO: "foxy"
    CATKIN_LINT: "true"
    UPSTREAM_WORKSPACE: "file"
    ROSINSTALL_FILENAME: ".ci.repos"
  script: .industrial_ci/gitlab.sh

